<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <title>Mongo Training - Szymon Sobocik</title>

    <!--<meta name="description" content="A framework for easily creating beautiful presentations using HTML">-->
    <meta name="author" content="Szymon Sobocik">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/black.css" id="theme">

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <link rel="stylesheet" href="css/custom.css" id="custom-css">

    <!-- Printing and PDF exports -->
    <script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );













    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
</head>

<body>

<div class="reveal">

    <!-- Any section element inside of this container is displayed as a slide -->
    <div class="slides">
        <section>
            <h1>MongoDB</h1>
            <h3>Document database</h3>
            <p>
                <small>Szymon Sobocik</small>
            </p>
        </section>

        <section>
            <h1>Plan</h1>
            <ol type="a">
                <li>What is MongoDB?</li>
                <li>Simple operations</li>
                <li>Data models</li>
                <li>Indexes</li>
                <li>Deployment</li>
                <li>Aggregation Fremework</li>
            </ol>

        </section>
        <section>
            <h3>What is MongoDB?</h3>
            <ul>
                <li>NoSQL Database
                    <p>
                        <small>- No tabular constraints on your data schema</small>
                    </p>
                </li>
                <li>Document Oriented
                    <p>
                        <small>- Database is organized into Collections and Documents, not Tables and Rows</small>
                    </p>
                </li>
                <li>Designed with Scalability in Mind
                    <p>
                        <small>- Scales well Horizontally</small>
                    </p>
                </li>
            </ul>
        </section>
        <section>
            <h3>How it's in SQL?</h3>
            <section>
                <p>Let's assume we have a banking application.</p>
                <ul>
                    <li>Persons</li>
                    <li>Accounts</li>
                </ul>
                <p>
                    <small><strong>Person</strong> can have many <strong>Accounts</strong>
                        and therefore <strong>Account</strong> has only one <strong>Person</strong></small>
                </p>
            </section>
            <section>
                <img src="images/PersonsAndAccounts.png">
            </section>
            <!--<section>-->
            <!--<p>Account Holders (Persons)</p>-->
            <!--<img data-src="images/02.Table_AccountHolders.png"/>-->

            <!--<p>Accounts</p>-->
            <!--<img data-src="images/03.Table_Accounts.png"/>-->
            <!--</section>-->
            <section>
                <p>Get a name for a Person with ID 1</p>
                <img class="fragment" src="images/sql.01.PersonWithId1.png"/>
            </section>
            <section>
                <p>Get accounts for Person with ID 1</p>
                <img class="fragment" src="images/sql.02.AccountsForPerson1.png"/>
                <p class="fragment">Two separate queries. Could be slow on large datasets.</p>
            </section>
            <section>
                <p>Who's the owner of account number 3?</p>
                <img class="fragment" src="images/sql.03.SearchForAccountHolder3.png"/>
                <p class="fragment">Must do 'Join' on Account Holder ID</p>

                <aside class="notes">Data was not together.</aside>
            </section>
            <section>
                <p>Which accounts are held by Adam Kowalski</p>
                <img class="fragment" src="images/sql.04.AccountsForKowalski.png"/>
                <p class="fragment">Must do 'Join' on Account Holder ID</p>

                <aside class="notes">Search by first and last name. Get an Person ID, and do a join.</aside>
            </section>
            <section>
                <h4>Issues?</h4>
                <ul class="fragment">
                    <li>Data across many tables</li>
                    <li>For one dashboard, requires several queries</li>
                    <li>Might require computation power</li>
                </ul>
            </section>
        </section>
        <section>
            <h2>How it's done in MongoDB</h2>
        </section>
        <section>
            <h3>Documents and Collections</h3>
        </section>
        <section>
            <h3>Document</h3>
            <section>
                <ul>
                    <li>key-value pairs</li>
                    <li>looks like JSON</li>
                    <li>values of fields may include other documents, arrays, and arrays of documents</li>
                    <li>in DB: Binary JSON --> BSON</li>
                </ul>
            </section>
            <section>
                <img src="images/document.01.Person01.png"/>
                <img src="images/document.01.Person02.png"/>
            </section>
            <section>
                <!--@formatter:off-->
                <pre><code class="hljs" data-trim contenteditable>
{
  "_id": "0",
  "first_name": "Adam",
  "last_name": "Kowalski",
  "accounts": [
    {
      "id": 0,
      "account_type": "Investment",
      "account_balance": "80000.00",
      "currency": "USD"
    },
    {
      "id": 1,
      "account_type": "Savings",
      "account_balance": "70400.00",
      "currency": "USD"
    },
    {
      "id": 2,
      "account_type": "Checking",
      "account_balance": "4500.00",
      "currency": "USD"
    }
  ]
}
                </code></pre>
                <!--@formatter:on-->
            </section>
        </section>
        <section>
            <h3>Collections</h3>
            <section>
                <ul>
                    <li>Documents are stored in Collections</li>
                    <li>Collections are analogous to tables in RDBMS</li>
                    <li>Does not require a schema</li>
                </ul>
            </section>
            <section>
                <p>Documents stored in a Collection must have a unique <strong>_id</strong> field that acts as a
                    <a href="https://docs.mongodb.org/manual/reference/glossary/#term-primary-key">primary key</a>
                </p>
                <p>Usually it's a BSON <strong>ObjectId</strong></p>
            </section>
            <section>
                <!--@formatter:off-->
                <pre><code class="hljs" data-trim contenteditable>
{
    "_id" : ObjectId("56a4acf432ba992db8fd174f"),
    "Name" : "Adam",
    "last_name" : "Kowalski"
},
{
    "_id" : ObjectId("56a536875a8b8c0d8298f3df"),
    "first_name" : "Marek",
    "last_name" : "Nowak"
}
                </code></pre>
            <!--@formatter:on-->
            </section>
        </section>

        <section>

        </section>

        <section>
            Install MongoJS
        </section>
        <section>
            Mongod, mongo, and mongos
        </section>


        <section>
            Projections
            <!--@formatter:off-->
                <pre><code class="hljs" data-trim contenteditable>
                </code></pre>
            <!--@formatter:on-->
        </section>

        <section>
            <h3>Document</h3>
            <!--@formatter:off-->
                <pre><code class="hljs" data-trim contenteditable>
{
   "_id" : ObjectId("54c955492b7c8eb21818bd09"),
   "address" : {
      "street" : "2 Avenue",
      "zipcode" : "10075",
      "building" : "1480",
      "coord" : [ -73.9557413, 40.7720266 ],
   },
   "borough" : "Manhattan",
   "cuisine" : "Italian",
   "grades" : [
      {
         "date" : ISODate("2014-10-01T00:00:00Z"),
         "grade" : "A",
         "score" : 11
      },
      {
         "date" : ISODate("2014-01-16T00:00:00Z"),
         "grade" : "B",
         "score" : 17
      }
   ],
   "name" : "Vella",
   "restaurant_id" : "41704620"
}
                </code></pre>
                <!--@formatter:on-->
        </section>
        <section>
            <h3>BSON</h3>
            <img data-src="images/01.AccountHolderWithAccounts.png"/>
            <img data-src="images/01.AccountHolderWithAccounts.png"/>
        </section>

        </section>

    </div>

</div>

<script src="lib/js/head.min.js"></script>
<script src="js/reveal.js"></script>

<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});































</script>

</body>
</html>
